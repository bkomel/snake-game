!function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";o.r(e);var n,i=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r="height: 20px; width: 20px; background-color: #777; border-radius: 4px",s="height: 20px; width: 20px; background-color: black; border-radius: 2px",a="height: 20px; width: 20px; background-color: #444; border-radius: 2px",d=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!1,configurable:!0}),t}(),c=function(){function t(t){void 0===t&&(t=new d),this._coordinates=t}return Object.defineProperty(t.prototype,"coordinates",{get:function(){return this._coordinates},enumerable:!1,configurable:!0}),t}(),l=function(t){function e(e,o,n){void 0===e&&(e=new d),void 0===o&&(o=null),void 0===n&&(n="NONE");var i=t.call(this,e)||this;return i._bodyType=o,i._direction=n,i}return i(e,t),Object.defineProperty(e.prototype,"bodyType",{get:function(){return this._bodyType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),e}(c),u=function(){function t(t,e){}return Object.defineProperty(t.prototype,"coordinates",{get:function(){return this._coordinates},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"foodType",{get:function(){return this._foodType},enumerable:!1,configurable:!0}),t}(),h=function(){function t(){this._length=3,this._direction=["UP","DOWN","LEFT","RIGHT"][Math.floor(4*Math.random())],this._headPosition=new l(new d(Math.floor(Math.random()*(20-2*this._length)+this._length),Math.floor(Math.random()*(20-2*this._length)+this._length)),s)}return Object.defineProperty(t.prototype,"length",{get:function(){return this._length},set:function(t){this._length=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headPosition",{get:function(){return this._headPosition},set:function(t){this._headPosition=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tailPosition",{get:function(){return this._tailPosition},set:function(t){this._tailPosition=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t},enumerable:!1,configurable:!0}),t}(),f=function(){function t(t){this._playgroundSize=20,this._playgroundDiv=document.getElementById("playground"),this._snake=t,this._fields=this.initializeFields(),console.log(this._fields)}return Object.defineProperty(t.prototype,"snake",{get:function(){return this._snake},enumerable:!1,configurable:!0}),t.prototype.initializeFields=function(){return Array(20).fill(0).map((function(t,e){return Array(20).fill(0).map((function(t,o){var n=new d(o,e);return new c(n)}))}))},t.prototype.drawPlayground=function(){this._table=document.createElement("table");var t=document.createElement("tbody");for(var e in this._fields){var o=document.createElement("tr");for(var n in this._fields[e]){var i=document.createElement("td");i.setAttribute("style","height: 20px; width: 20px; background-color: silver;"),i.setAttribute("id",n+"-"+e),o.appendChild(i)}t.appendChild(o)}this._table.appendChild(t),this._table.setAttribute("style","margin: 0 auto; border: 2px solid"),this._playgroundDiv.appendChild(this._table)},t.prototype.resetPlayground=function(){this._snake=new h,this._fields=this.initializeFields(),this._table.remove(),this.drawPlayground(),this.drawSnake(),this.drawFood()},t.prototype.markField=function(t,e){document.getElementById(t.x.toString()+"-"+t.y.toString()).setAttribute("style",e)},t.prototype.drawSnake=function(){var t,e,o,n,i=this._snake.headPosition.coordinates;this.markField(i,s),this._fields[i.y][i.x]=new l(i,s,this._snake.direction);for(var a=1;a<this._snake.length;a++){e=(t=this.getCoordinateShiftFunctions(this._snake.direction,!0,a))[0],o=t[1];var c=new d(e(i.x),o(i.y));n=new l(c,r,this._snake.direction),this.markField(n.coordinates,r),this._fields[n.coordinates.y][n.coordinates.x]=n}this._snake.tailPosition=n},t.prototype.flashTableBorder=function(){var t=this,e=5,o=setInterval((function(){console.log("intervalll"),e%2?t._table.setAttribute("style","margin: 0 auto; border: 2px solid red"):t._table.setAttribute("style","margin: 0 auto; border: 2px solid"),e<0&&(t._table.setAttribute("style","margin: 0 auto; border: 2px solid"),clearInterval(o)),e--}),300)},t.prototype.drawFood=function(){var t;do{t=new d(Math.floor(Math.random()*(this._playgroundSize-1)),Math.floor(Math.random()*(this._playgroundSize-1)))}while(this._fields[t.y][t.x]instanceof l);this.markField(t,"height: 20px; width: 20px; background-color: red; border-radius: 4px")},t.prototype.getCoordinateShiftFunctions=function(t,e,o){return void 0===e&&(e=!1),void 0===o&&(o=1),o=e?-1*o:o,"LEFT"===t||"RIGHT"===t?["LEFT"===t?function(t){return t-o}:function(t){return t+o},function(t){return t}]:"UP"===t||"DOWN"===t?[function(t){return t},"UP"===t?function(t){return t-o}:function(t){return t+o}]:void 0},t.prototype.getField=function(t){return this._fields[t.y][t.x]},t.prototype.setField=function(t,e){this._fields[t.y][t.x]=e},t.prototype.moveSnake=function(){var t=this.makeShiftedCoordinates(this._snake.headPosition.coordinates,this._snake.direction);this.checkBorderHit(t),this.checkBodyHit2(t),this.checkFoodField(t);var e=this.checkFoodField(this._snake.headPosition.coordinates)?a:r;if(this.setField(this._snake.headPosition.coordinates,new l(this._snake.headPosition.coordinates,e,this._snake.direction)),this.markField(this._snake.headPosition.coordinates,e),this._snake.headPosition=new l(t,s,this._snake.direction),this.markField(this._snake.headPosition.coordinates,s),this.checkFoodField(this._snake.tailPosition.coordinates))console.log("fooooooddd");else{this.setField(this._snake.tailPosition.coordinates,new c(this._snake.tailPosition.coordinates)),this.markField(this._snake.tailPosition.coordinates,"height: 20px; width: 20px; background-color: silver;");var o=this.getField(this._snake.tailPosition.coordinates),n=this.makeShiftedCoordinates(this._snake.tailPosition.coordinates,o.direction),i=this.getField(this._snake.tailPosition.coordinates);this._snake.tailPosition=new l(n,r,i.direction)}this.makeShiftedCoordinates(this._snake.tailPosition.coordinates,this._snake.tailPosition.direction)},t.prototype.makeShiftedCoordinates=function(t,e){var o=this.getCoordinateShiftFunctions(e),n=o[0],i=o[1];return new d(n(t.x),i(t.y))},t.prototype.makeNewTailPosition=function(t){var e=this.getCoordinateShiftFunctions(t.direction),o=e[0],n=e[1];o(t.coordinates.x),n(t.coordinates.y);return new l(new d(o(t.coordinates.x)))},t.prototype.checkBorders=function(t,e){if(t<0||t>this._playgroundSize-1||e<0||e>this._playgroundSize-1)throw new Error("Out of borders")},t.prototype.checkBorderHit=function(t){if(t.x<0||t.x>this._playgroundSize-1||t.y<0||t.x>this._playgroundSize)throw console.log("You hit the border!"),new Error("You hit the border!")},t.prototype.checkBodyHit2=function(t){if(this._fields[t.y][t.x]instanceof l)throw console.log("You hit yourself!"),new Error("You hit yourself!")},t.prototype.checkFoodField=function(t){var e=this.getField(t);return e instanceof u||e instanceof l&&e.bodyType===a},t.prototype.checkBodyHit=function(t,e){if(this._fields[e][t]instanceof l)throw new Error("You hit yourself")},t}(),p=function(){function t(t){var e=this;this._timeSlicePeriod=90,this._gameRunning=!1,this.spaceKeyListener=function(t){switch(t.keyCode){case 32:e.gameRunning?e.pause():e.start()}},this.controlKeysListener=function(t){switch(t.keyCode){case 105:e._playground.snake.direction="UP";break;case 107:e._playground.snake.direction="DOWN";break;case 106:e._playground.snake.direction="LEFT";break;case 108:e._playground.snake.direction="RIGHT"}},this._playground=t}return t.prototype.start=function(){this.enableSnakeControls(),this._gameRunning=!0},t.prototype.pause=function(){this.disableSnakeControls(),this._gameRunning=!1},t.prototype.reset=function(){this._playground.resetPlayground(),this.enableGameControls()},t.prototype.gameover=function(){var t=this;this.disableGameControls(),this.disableSnakeControls(),this._gameRunning=!1,setTimeout((function(){t.reset()}),2e3),this._playground.flashTableBorder()},t.prototype.enableGameControls=function(){document.addEventListener("keypress",this.spaceKeyListener),console.log("Game Controls Enabled!")},t.prototype.disableGameControls=function(){document.removeEventListener("keypress",this.spaceKeyListener),console.log("Game Controls Disabled!")},t.prototype.enableSnakeControls=function(){document.addEventListener("keypress",this.controlKeysListener),console.log("Snake Controls Enabled!")},t.prototype.disableSnakeControls=function(){document.removeEventListener("keypress",this.controlKeysListener),console.log("Game Controls Disabled!")},Object.defineProperty(t.prototype,"timeSlicePeriod",{get:function(){return this._timeSlicePeriod},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameRunning",{get:function(){return this._gameRunning},enumerable:!1,configurable:!0}),t.prototype.timeSlice=function(){if(this._gameRunning)try{this._playground.moveSnake()}catch(t){this.gameover()}},t}(),y=new f(new h),g=new p(y);y.drawPlayground(),y.drawSnake(),y.drawFood(),console.log("hh"),g.enableGameControls(),setInterval((function(){g.timeSlice()}),g.timeSlicePeriod)}]);