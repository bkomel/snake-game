!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n,o=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r="height: 20px; width: 20px; background-color: #777; border-radius: 4px",s="height: 20px; width: 20px; background-color: black; border-radius: 2px",a="height: 20px; width: 20px; background-color: red; border-radius: 15px",d="height: 20px; width: 20px; background-color: #444; border-radius: 2px",c=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!1,configurable:!0}),t}(),u=function(){function t(t){void 0===t&&(t=new c),this._coordinates=t}return Object.defineProperty(t.prototype,"coordinates",{get:function(){return this._coordinates},enumerable:!1,configurable:!0}),t}(),l=function(t){function e(e,i,n){void 0===e&&(e=new c),void 0===i&&(i=null),void 0===n&&(n="NONE");var o=t.call(this,e)||this;return o._bodyType=i,o._direction=n,o}return o(e,t),Object.defineProperty(e.prototype,"bodyType",{get:function(){return this._bodyType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),e}(u),h=function(t){function e(e,i){void 0===e&&(e=new c);var n=t.call(this,e)||this;return n._foodType=i,n}return o(e,t),Object.defineProperty(e.prototype,"foodType",{get:function(){return this._foodType},enumerable:!1,configurable:!0}),e}(u),p=function(){function t(){this._length=3,this._direction=["UP","DOWN","LEFT","RIGHT"][Math.floor(4*Math.random())],this._headPosition=new l(new c(Math.floor(Math.random()*(20-2*this._length)+this._length),Math.floor(Math.random()*(20-2*this._length)+this._length)),s)}return Object.defineProperty(t.prototype,"length",{get:function(){return this._length},set:function(t){this._length=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headPosition",{get:function(){return this._headPosition},set:function(t){this._headPosition=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tailPosition",{get:function(){return this._tailPosition},set:function(t){this._tailPosition=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t},enumerable:!1,configurable:!0}),t}(),f=function(){function t(t){this._playgroundSize=20,this._playgroundDiv=document.getElementById("playground"),this._snake=t,this._fields=this.initializeFields()}return Object.defineProperty(t.prototype,"snake",{get:function(){return this._snake},enumerable:!1,configurable:!0}),t.prototype.initializeFields=function(){return Array(20).fill(0).map((function(t,e){return Array(20).fill(0).map((function(t,i){var n=new c(i,e);return new u(n)}))}))},t.prototype.drawPlayground=function(){this._table=document.createElement("table");var t=document.createElement("tbody");for(var e in this._fields){var i=document.createElement("tr");for(var n in this._fields[e]){var o=document.createElement("td");o.setAttribute("style","height: 20px; width: 20px; background-color: silver;"),o.setAttribute("id",n+"-"+e),i.appendChild(o)}t.appendChild(i)}this._table.appendChild(t),this._table.setAttribute("style","margin: 0 auto; border: 2px solid"),this._playgroundDiv.appendChild(this._table)},t.prototype.resetPlayground=function(){this._snake=new p,this._fields=this.initializeFields(),this._table.remove(),this.drawPlayground(),this.drawSnake(),this.drawFood()},t.prototype.markField=function(t,e){document.getElementById(t.x.toString()+"-"+t.y.toString()).setAttribute("style",e)},t.prototype.drawSnake=function(){var t,e,i,n,o=this._snake.headPosition.coordinates;this.markField(o,s),this._fields[o.y][o.x]=new l(o,s,this._snake.direction);for(var a=1;a<this._snake.length;a++){e=(t=this.getCoordinateShiftFunctions(this._snake.direction,!0,a))[0],i=t[1];var d=new c(e(o.x),i(o.y));n=new l(d,r,this._snake.direction),this.markField(n.coordinates,r),this._fields[n.coordinates.y][n.coordinates.x]=n}this._snake.tailPosition=n},t.prototype.flashTableBorder=function(){var t=this,e=5,i=setInterval((function(){e%2?t._table.setAttribute("style","margin: 0 auto; border: 2px solid red"):t._table.setAttribute("style","margin: 0 auto; border: 2px solid"),e<0&&(t._table.setAttribute("style","margin: 0 auto; border: 2px solid"),clearInterval(i)),e--}),300)},t.prototype.drawFood=function(){var t;do{t=new c(Math.floor(Math.random()*(this._playgroundSize-1)),Math.floor(Math.random()*(this._playgroundSize-1)))}while(this._fields[t.y][t.x]instanceof l);this.setField(t,new h(t,a)),this.markField(t,a)},t.prototype.getCoordinateShiftFunctions=function(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=1),i=e?-1*i:i,"LEFT"===t||"RIGHT"===t?["LEFT"===t?function(t){return t-i}:function(t){return t+i},function(t){return t}]:"UP"===t||"DOWN"===t?[function(t){return t},"UP"===t?function(t){return t-i}:function(t){return t+i}]:void 0},t.prototype.getField=function(t){return this._fields[t.y][t.x]},t.prototype.setField=function(t,e){this._fields[t.y][t.x]=e},t.prototype.moveSnake=function(){var t=this.makeShiftedCoordinates(this._snake.headPosition.coordinates,this._snake.direction);this.checkBorderHit(t),this.checkBodyHit(t),this.checkFoodField(t)&&this.drawFood();var e=this.checkFoodField(this._snake.headPosition.coordinates)?d:r;if(this.setField(this._snake.headPosition.coordinates,new l(this._snake.headPosition.coordinates,e,this._snake.direction)),this.markField(this._snake.headPosition.coordinates,e),this._snake.headPosition=new l(t,s,this._snake.direction),this.markField(this._snake.headPosition.coordinates,s),this.checkBodyAndFoodField(this._snake.tailPosition.coordinates))this.setField(this._snake.tailPosition.coordinates,new l(this._snake.tailPosition.coordinates,r,this._snake.tailPosition.direction)),this._snake.length=this._snake.length+1;else{var i=this.getField(this._snake.tailPosition.coordinates),n=this.makeShiftedCoordinates(this._snake.tailPosition.coordinates,i.direction),o=this.getField(n);this.setField(this._snake.tailPosition.coordinates,new u(this._snake.tailPosition.coordinates)),this.markField(this._snake.tailPosition.coordinates,"height: 20px; width: 20px; background-color: silver;"),this._snake.tailPosition=new l(n,r,o.direction)}},t.prototype.makeShiftedCoordinates=function(t,e){var i=this.getCoordinateShiftFunctions(e),n=i[0],o=i[1];return new c(n(t.x),o(t.y))},t.prototype.makeNewTailPosition=function(t){var e=this.getCoordinateShiftFunctions(t.direction),i=e[0],n=e[1];i(t.coordinates.x),n(t.coordinates.y);return new l(new c(i(t.coordinates.x)))},t.prototype.checkBorderHit=function(t){if(t.x<0||t.x>this._playgroundSize-1||t.y<0||t.x>this._playgroundSize)throw console.log("You hit the border!"),new Error("You hit the border!")},t.prototype.checkBodyHit=function(t){if(this._fields[t.y][t.x]instanceof l)throw console.log("You hit yourself!"),new Error("You hit yourself!")},t.prototype.checkFoodField=function(t){return this.getField(t)instanceof h},t.prototype.checkBodyAndFoodField=function(t){return this.getField(t).bodyType===d},t}(),y=function(){function t(t){var e=this;this._timeSlicePeriod=90,this._gameRunning=!1,this.spaceKeyListener=function(t){switch(t.keyCode){case 32:e.gameRunning?e.pause():e.start()}},this.controlKeysListener=function(t){switch(t.keyCode){case 105:e._playground.snake.direction="UP";break;case 107:e._playground.snake.direction="DOWN";break;case 106:e._playground.snake.direction="LEFT";break;case 108:e._playground.snake.direction="RIGHT"}},this._playground=t}return t.prototype.start=function(){this.enableSnakeControls(),this._gameRunning=!0},t.prototype.pause=function(){this.disableSnakeControls(),this._gameRunning=!1},t.prototype.reset=function(){this._playground.resetPlayground(),this.enableGameControls()},t.prototype.gameover=function(){var t=this;this.disableGameControls(),this.disableSnakeControls(),this._gameRunning=!1,setTimeout((function(){t.reset()}),2e3),this._playground.flashTableBorder()},t.prototype.enableGameControls=function(){document.addEventListener("keypress",this.spaceKeyListener)},t.prototype.disableGameControls=function(){document.removeEventListener("keypress",this.spaceKeyListener)},t.prototype.enableSnakeControls=function(){document.addEventListener("keypress",this.controlKeysListener)},t.prototype.disableSnakeControls=function(){document.removeEventListener("keypress",this.controlKeysListener)},Object.defineProperty(t.prototype,"timeSlicePeriod",{get:function(){return this._timeSlicePeriod},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameRunning",{get:function(){return this._gameRunning},enumerable:!1,configurable:!0}),t.prototype.timeSlice=function(){if(this._gameRunning)try{this._playground.moveSnake()}catch(t){this.gameover()}},t}(),_=new f(new p),g=new y(_);_.drawPlayground(),_.drawSnake(),_.drawFood(),g.enableGameControls(),setInterval((function(){g.timeSlice()}),g.timeSlicePeriod)}]);