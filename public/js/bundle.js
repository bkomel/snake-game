!function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";o.r(e);var n,i=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,i++)n[i]=r[s];return n},s="height: 20px; width: 20px; background-color: #777; border-radius: 4px",a="height: 20px; width: 20px; background-color: black; border-radius: 2px",d="height: 20px; width: 20px; background-color: rgb(255, 0, 0); border-radius: 15px;",c="height: 20px; width: 20px; background-color: #444; border-radius: 2px",h="height: 20px; width: 20px; background-color: rgb(170, 170, 170);",u="height: 20px; width: 20px; background-color: rgb(64, 64, 64); border-radius: 2px",l="height: 20px; width: 20px; background-color: rgb(126, 126, 126); border-radius: 4px;",p="height: 20px; width: 20px; background-color: rgb(64, 64, 64); border-radius: 4px",f="UP",y=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!1,configurable:!0}),t}(),g=function(){function t(t,e,o,n){void 0===n&&(n=!1),this._coordinates=t,this._direction=e,this._type=o,this._containsFood=n}return Object.defineProperty(t.prototype,"coordinates",{get:function(){return this._coordinates},set:function(t){this._coordinates=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containsFood",{get:function(){return this._containsFood},enumerable:!1,configurable:!0}),t}(),_=(function(){function t(t,e){this._coordinates=t,this._type=e}Object.defineProperty(t.prototype,"coordinates",{get:function(){return this._coordinates},set:function(t){this._coordinates=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!1,configurable:!0})}(),function(){function t(t){void 0===t&&(t=new y),this._coordinates=t}return Object.defineProperty(t.prototype,"coordinates",{get:function(){return this._coordinates},enumerable:!1,configurable:!0}),t}()),b=function(t){function e(e,o,n){void 0===e&&(e=new y),void 0===o&&(o=null),void 0===n&&(n="NONE");var i=t.call(this,e)||this;return i._bodyType=o,i._direction=n,i}return i(e,t),Object.defineProperty(e.prototype,"bodyType",{get:function(){return this._bodyType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),e}(_),k=function(t){function e(e,o){void 0===e&&(e=new y);var n=t.call(this,e)||this;return n._foodType=o,n}return i(e,t),Object.defineProperty(e.prototype,"foodType",{get:function(){return this._foodType},enumerable:!1,configurable:!0}),e}(_),m=function(){function t(){this._length=3,this._direction=[f,"DOWN","LEFT","RIGHT"][Math.floor(4*Math.random())],this._headPosition=new b(new y(Math.floor(Math.random()*(20-2*this._length)+this._length),Math.floor(Math.random()*(20-2*this._length)+this._length)),a),this._head=new g(new y(Math.floor(Math.random()*(20-2*this._length)+this._length),Math.floor(Math.random()*(20-2*this._length)+this._length)),this._direction,u),this._body=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this._length},set:function(t){this._length=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headPosition",{get:function(){return this._headPosition},set:function(t){this._headPosition=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tailPosition",{get:function(){return this._tailPosition},set:function(t){this._tailPosition=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"head",{get:function(){return this._head},set:function(t){this._head=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return this._body},set:function(t){this._body=t},enumerable:!1,configurable:!0}),t}(),x=function(){function t(t){this._playgroundSize=20,this._playgroundDiv=document.getElementById("playground"),this._snake=t,this._fields=this.initializeFields()}return Object.defineProperty(t.prototype,"snake",{get:function(){return this._snake},enumerable:!1,configurable:!0}),t.prototype.initializeFields=function(){return Array(20).fill(0).map((function(t,e){return Array(20).fill(0).map((function(t,o){var n=new y(o,e);return new _(n)}))}))},t.prototype.drawPlayground=function(){this._table=document.createElement("table");var t=document.createElement("tbody");for(var e in Array(this._playgroundSize).fill(0)){var o=document.createElement("tr");for(var n in Array(this._playgroundSize).fill(0)){var i=document.createElement("td");i.setAttribute("style",h),i.setAttribute("id",n+"-"+e),i.setAttribute("field-type",h),o.appendChild(i)}t.appendChild(o)}this._table.appendChild(t),this._table.setAttribute("style","margin: 0 auto; border: 2px solid; font-size: 6px;"),this._playgroundDiv.appendChild(this._table)},t.prototype.resetPlayground=function(){this._snake=new m,this._table.remove(),this.drawPlayground(),this.drawSnake2(),this.drawFood2()},t.prototype.markField=function(t,e){document.getElementById(t.x.toString()+"-"+t.y.toString()).setAttribute("style",e)},t.prototype.drawSnake2=function(){var t,e,o,n;this.markField(this._snake.head.coordinates,this._snake.head.type);for(var i=1;i<this._snake.length;i++)e=(t=this.getCoordinateShiftFunctions(this._snake.direction,!0,i))[0],o=t[1],n=new g(new y(e(this._snake.head.coordinates.x),o(this._snake.head.coordinates.y)),this._snake.direction,l),this._snake.body=r(this._snake.body,[n]),this.markField(n.coordinates,n.type)},t.prototype.drawSnake=function(){var t,e,o,n,i=this._snake.headPosition.coordinates;this.markField(i,a),this._fields[i.y][i.x]=new b(i,a,this._snake.direction);for(var r=1;r<this._snake.length;r++){e=(t=this.getCoordinateShiftFunctions(this._snake.direction,!0,r))[0],o=t[1];var d=new y(e(i.x),o(i.y));n=new b(d,s,this._snake.direction),this.markField(n.coordinates,s),this._fields[n.coordinates.y][n.coordinates.x]=n}this._snake.tailPosition=n},t.prototype.flashTableBorder=function(){var t=this,e=5,o=setInterval((function(){e%2?t._table.setAttribute("style","margin: 0 auto; border: 2px solid red; font-size: 6px;"):t._table.setAttribute("style","margin: 0 auto; border: 2px solid; font-size: 6px;"),e<0&&(t._table.setAttribute("style","margin: 0 auto; border: 2px solid; font-size: 6px;"),clearInterval(o)),e--}),300)},t.prototype.drawFood2=function(){var t;do{t=new y(Math.floor(Math.random()*(this._playgroundSize-1)),Math.floor(Math.random()*(this._playgroundSize-1)))}while(document.getElementById(t.x+"-"+t.y).getAttribute("style")!==h);this.markField(t,d)},t.prototype.drawFood=function(){var t;do{t=new y(Math.floor(Math.random()*(this._playgroundSize-1)),Math.floor(Math.random()*(this._playgroundSize-1))),console.log(document.getElementById(t.x+"-"+t.y).style.cssText),console.log(h),console.log(document.getElementById(t.x+"-"+t.y).style.cssText===h)}while(this._fields[t.y][t.x]instanceof b);this.setField(t,new k(t,d)),this.markField(t,d)},t.prototype.getCoordinateShiftFunctions=function(t,e,o){return void 0===e&&(e=!1),void 0===o&&(o=1),o=e?-1*o:o,"LEFT"===t||"RIGHT"===t?["LEFT"===t?function(t){return t-o}:function(t){return t+o},function(t){return t}]:t===f||"DOWN"===t?[function(t){return t},t===f?function(t){return t-o}:function(t){return t+o}]:void 0},t.prototype.getField=function(t){return this._fields[t.y][t.x]},t.prototype.setField=function(t,e){this._fields[t.y][t.x]=e},t.prototype.moveSnake2=function(){var t=this.makeShiftedCoordinates(this._snake.head.coordinates,this._snake.direction);this.checkBorderHit(t),this.checkBodyHit2(t);var e=u,o=this._snake.head.type===u?l:p;this.checkFoodHit(t)&&(e="height: 20px; width: 20px; background-color: rgb(0, 0, 0); border-radius: 2px",this.drawFood2());var n=r([new g(this._snake.head.coordinates,this._snake.direction,o)],this._snake.body);this.markField(this._snake.head.coordinates,o);var i=n[n.length-1];n[n.length-1].type===p?(n[n.length-1]=new g(i.coordinates,i.direction,l),this.markField(i.coordinates,l)):(n.pop(),this.markField(i.coordinates,h)),this._snake.body=n,this._snake.head=new g(t,this._snake.direction,e),this.markField(this._snake.head.coordinates,this._snake.head.type)},t.prototype.moveSnake=function(){var t=this.makeShiftedCoordinates(this._snake.headPosition.coordinates,this._snake.direction);this.checkBorderHit(t),this.checkBodyHit(t),this.checkFoodField(t)&&this.drawFood();var e=this.checkFoodField(this._snake.headPosition.coordinates)?c:s;if(this.setField(this._snake.headPosition.coordinates,new b(this._snake.headPosition.coordinates,e,this._snake.direction)),this.markField(this._snake.headPosition.coordinates,e),this._snake.headPosition=new b(t,a,this._snake.direction),this.markField(this._snake.headPosition.coordinates,a),this.checkBodyAndFoodField(this._snake.tailPosition.coordinates))this.setField(this._snake.tailPosition.coordinates,new b(this._snake.tailPosition.coordinates,s,this._snake.tailPosition.direction)),this._snake.length=this._snake.length+1;else{var o=this.getField(this._snake.tailPosition.coordinates),n=this.makeShiftedCoordinates(this._snake.tailPosition.coordinates,o.direction),i=this.getField(n);this.setField(this._snake.tailPosition.coordinates,new _(this._snake.tailPosition.coordinates)),this.markField(this._snake.tailPosition.coordinates,"height: 20px; width: 20px; background-color: silver;"),this._snake.tailPosition=new b(n,s,i.direction)}},t.prototype.makeShiftedCoordinates=function(t,e){var o=this.getCoordinateShiftFunctions(e),n=o[0],i=o[1];return new y(n(t.x),i(t.y))},t.prototype.makeNewTailPosition=function(t){var e=this.getCoordinateShiftFunctions(t.direction),o=e[0],n=e[1];o(t.coordinates.x),n(t.coordinates.y);return new b(new y(o(t.coordinates.x)))},t.prototype.checkBorderHit=function(t){if(t.x<0||t.x>this._playgroundSize-1||t.y<0||t.x>this._playgroundSize)throw console.log("You hit the border!"),new Error("You hit the border!")},t.prototype.checkBodyHit2=function(t){var e=document.getElementById(t.x+"-"+t.y).style.cssText;if(e===l||e===p)throw console.log("You hit yourself"),new Error("You hit yourself")},t.prototype.checkFoodHit=function(t){return console.log(document.getElementById(t.x+"-"+t.y).style.cssText,d),document.getElementById(t.x+"-"+t.y).style.cssText===d&&(console.log("foooooooooood"),!0)},t.prototype.checkBodyHit=function(t){if(this._fields[t.y][t.x]instanceof b)throw console.log("You hit yourself!"),new Error("You hit yourself!")},t.prototype.checkFoodField=function(t){return this.getField(t)instanceof k},t.prototype.checkBodyAndFoodField=function(t){return this.getField(t).bodyType===c},t}(),v=function(){function t(t){var e=this;this._timeSlicePeriod=90,this._gameRunning=!1,this.spaceKeyListener=function(t){switch(t.keyCode){case 32:e.gameRunning?e.pause():e.start()}},this.controlKeysListener=function(t){switch(t.keyCode){case 105:"DOWN"!==e._playground.snake.direction&&(e._playground.snake.direction=f);break;case 107:e._playground.snake.direction!==f&&(e._playground.snake.direction="DOWN");break;case 106:"RIGHT"!==e._playground.snake.direction&&(e._playground.snake.direction="LEFT");break;case 108:"LEFT"!==e._playground.snake.direction&&(e._playground.snake.direction="RIGHT")}},this._playground=t}return t.prototype.start=function(){this.enableSnakeControls(),this._gameRunning=!0},t.prototype.pause=function(){this.disableSnakeControls(),this._gameRunning=!1},t.prototype.reset=function(){this._playground.resetPlayground(),this.enableGameControls()},t.prototype.gameover=function(){var t=this;this.disableGameControls(),this.disableSnakeControls(),this._gameRunning=!1,setTimeout((function(){t.reset()}),2e3),this._playground.flashTableBorder()},t.prototype.enableGameControls=function(){document.addEventListener("keypress",this.spaceKeyListener)},t.prototype.disableGameControls=function(){document.removeEventListener("keypress",this.spaceKeyListener)},t.prototype.enableSnakeControls=function(){document.addEventListener("keypress",this.controlKeysListener)},t.prototype.disableSnakeControls=function(){document.removeEventListener("keypress",this.controlKeysListener)},Object.defineProperty(t.prototype,"timeSlicePeriod",{get:function(){return this._timeSlicePeriod},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameRunning",{get:function(){return this._gameRunning},enumerable:!1,configurable:!0}),t.prototype.timeSlice=function(){if(this._gameRunning)try{this._playground.moveSnake2()}catch(t){this.gameover()}},t}(),w=new m,P=new x(w),F=new v(P);P.drawPlayground(),P.drawSnake2(),P.drawFood2(),console.log(w),F.enableGameControls(),setInterval((function(){F.timeSlice()}),F.timeSlicePeriod)}]);