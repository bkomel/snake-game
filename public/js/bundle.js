!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var i,o=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r="height: 20px; width: 20px; background-color: #777; border-radius: 4px",s="height: 20px; width: 20px; background-color: black; border-radius: 4px",a=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e},enumerable:!1,configurable:!0}),e}(),u=function(){function e(e){void 0===e&&(e=new a),this._coordinates=e}return Object.defineProperty(e.prototype,"coordinates",{get:function(){return this._coordinates},enumerable:!1,configurable:!0}),e}(),c=function(e){function t(t,n,i){void 0===t&&(t=new a),void 0===n&&(n=null),void 0===i&&(i="NONE");var o=e.call(this,t)||this;return o._bodyType=n,o._direction=i,o}return o(t,e),Object.defineProperty(t.prototype,"bodyType",{get:function(){return this._bodyType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),t}(u),d=(function(){function e(e,t){}Object.defineProperty(e.prototype,"coordinates",{get:function(){return this._coordinates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"foodType",{get:function(){return this._foodType},enumerable:!1,configurable:!0})}(),function(){function e(){this._length=3,this._direction=["UP","DOWN","LEFT","RIGHT"][Math.floor(4*Math.random())],this._headPosition=new c(new a(Math.floor(Math.random()*(20-2*this._length)+this._length),Math.floor(Math.random()*(20-2*this._length)+this._length)),s)}return Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(e){this._length=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headPosition",{get:function(){return this._headPosition},set:function(e){this._headPosition=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tailPosition",{get:function(){return this._tailPosition},set:function(e){this._tailPosition=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e},enumerable:!1,configurable:!0}),e}()),l=function(){function e(e){this._playgroundSize=20,this._playgroundDiv=document.getElementById("playground"),this._snake=e,this._fields=this.initializeFields(),console.log(this._fields)}return Object.defineProperty(e.prototype,"snake",{get:function(){return this._snake},enumerable:!1,configurable:!0}),e.prototype.initializeFields=function(){return Array(20).fill(0).map((function(e,t){return Array(20).fill(0).map((function(e,n){var i=new a(n,t);return new u(i)}))}))},e.prototype.drawPlayground=function(){this._table=document.createElement("table");var e=document.createElement("tbody");for(var t in this._fields){var n=document.createElement("tr");for(var i in this._fields[t]){var o=document.createElement("td");o.setAttribute("style","height: 20px; width: 20px; background-color: silver;"),o.setAttribute("id",i+"-"+t),n.appendChild(o)}e.appendChild(n)}this._table.appendChild(e),this._table.setAttribute("style","margin: 0 auto; border: 2px solid"),this._playgroundDiv.appendChild(this._table)},e.prototype.resetPlayground=function(){this._snake=new d,this._fields=this.initializeFields(),this._table.remove(),this.drawPlayground(),this.drawSnake()},e.prototype.markField=function(e,t){document.getElementById(e.x.toString()+"-"+e.y.toString()).setAttribute("style",t)},e.prototype.drawSnake=function(){var e,t,n,i,o=this._snake.headPosition.coordinates;this.markField(o,s),this._fields[o.y][o.x]=new c(o,s,this._snake.direction);for(var u=1;u<this._snake.length;u++){t=(e=this.getCoordinateShiftFunctions(this._snake.direction,!0,u))[0],n=e[1];var d=new a(t(o.x),n(o.y));i=new c(d,r,this._snake.direction),this.markField(i.coordinates,r),this._fields[i.coordinates.y][i.coordinates.x]=i}this._snake.tailPosition=i},e.prototype.flashTableBorder=function(){var e=this,t=5,n=setInterval((function(){console.log("intervalll"),t%2?e._table.setAttribute("style","margin: 0 auto; border: 2px solid red"):e._table.setAttribute("style","margin: 0 auto; border: 2px solid"),t<0&&(e._table.setAttribute("style","margin: 0 auto; border: 2px solid"),clearInterval(n)),t--}),300)},e.prototype.drawFood=function(){},e.prototype.getCoordinateShiftFunctions=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=1),n=t?-1*n:n,"LEFT"===e||"RIGHT"===e?["LEFT"===e?function(e){return e-n}:function(e){return e+n},function(e){return e}]:"UP"===e||"DOWN"===e?[function(e){return e},"UP"===e?function(e){return e-n}:function(e){return e+n}]:void 0},e.prototype.moveSnake=function(){var e,t,n=this._snake.tailPosition;this._fields[n.coordinates.y][n.coordinates.x]=new u(n.coordinates);var i=this.getCoordinateShiftFunctions(n.direction),o=i[0],d=i[1],l=[o(n.coordinates.x),d(n.coordinates.y)],h=l[0],f=l[1],p=new a(o(n.coordinates.x),d(n.coordinates.y)),y=this._fields[f][h];this._snake.tailPosition=new c(p,r,y.direction);var b=this._snake.headPosition;this._fields[b.coordinates.y][b.coordinates.x]=new c(b.coordinates,r,this._snake.direction),o=(e=this.getCoordinateShiftFunctions(this._snake.direction))[0],d=e[1],h=(t=[o(b.coordinates.x),d(b.coordinates.y)])[0],f=t[1],this.checkBorders(h,f),this.checkBodyHit(h,f);var g=new a(h,f);this._snake.headPosition=new c(g,this._snake.direction),this.markField(n.coordinates,"height: 20px; width: 20px; background-color: silver;"),this.markField(b.coordinates,r),this.markField(this._snake.headPosition.coordinates,s)},e.prototype.checkBorders=function(e,t){if(e<0||e>this._playgroundSize-1||t<0||t>this._playgroundSize-1)throw new Error("Out of borders")},e.prototype.checkBodyHit=function(e,t){if(this._fields[t][e]instanceof c)throw new Error("You hit yourself")},e}(),h=function(){function e(e){var t=this;this._timeSlicePeriod=90,this._gameRunning=!1,this.spaceKeyListener=function(e){switch(e.keyCode){case 32:t.gameRunning?t.pause():t.start()}},this.controlKeysListener=function(e){switch(e.keyCode){case 105:t._playground.snake.direction="UP";break;case 107:t._playground.snake.direction="DOWN";break;case 106:t._playground.snake.direction="LEFT";break;case 108:t._playground.snake.direction="RIGHT"}},this._playground=e}return e.prototype.start=function(){this.enableSnakeControls(),this._gameRunning=!0},e.prototype.pause=function(){this.disableSnakeControls(),this._gameRunning=!1},e.prototype.reset=function(){this._playground.resetPlayground(),this.enableGameControls()},e.prototype.gameover=function(){var e=this;this.disableGameControls(),this.disableSnakeControls(),this._gameRunning=!1,setTimeout((function(){e.reset()}),2e3),this._playground.flashTableBorder()},e.prototype.enableGameControls=function(){document.addEventListener("keypress",this.spaceKeyListener)},e.prototype.disableGameControls=function(){document.removeEventListener("keypress",this.spaceKeyListener)},e.prototype.enableSnakeControls=function(){document.addEventListener("keypress",this.controlKeysListener)},e.prototype.disableSnakeControls=function(){document.removeEventListener("keypress",this.controlKeysListener)},Object.defineProperty(e.prototype,"timeSlicePeriod",{get:function(){return this._timeSlicePeriod},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameRunning",{get:function(){return this._gameRunning},enumerable:!1,configurable:!0}),e.prototype.timeSlice=function(){if(this._gameRunning)try{this._playground.moveSnake()}catch(e){this.gameover()}},e}(),f=new l(new d),p=new h(f);f.drawPlayground(),f.drawSnake(),p.enableGameControls(),setInterval((function(){p.timeSlice()}),p.timeSlicePeriod)}]);