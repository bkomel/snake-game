!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i,o=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r="height: 20px; width: 20px; background-color: #777; border-radius: 4px",s="height: 20px; width: 20px; background-color: black; border-radius: 2px",a="height: 20px; width: 20px; background-color: red; border-radius: 15px",d="height: 20px; width: 20px; background-color: #444; border-radius: 2px",c="height: 20px; width: 20px; background-color: rgb(170, 170, 170);",u=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!1,configurable:!0}),t}(),h=function(){function t(t,e,n){this._coordinates=t,this._direction=e,this._type=n}return Object.defineProperty(t.prototype,"coordinates",{get:function(){return this._coordinates},set:function(t){this._coordinates=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!1,configurable:!0}),t}(),l=(function(){function t(t,e){this._coordinates=t,this._type=e}Object.defineProperty(t.prototype,"coordinates",{get:function(){return this._coordinates},set:function(t){this._coordinates=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!1,configurable:!0})}(),function(){function t(t){void 0===t&&(t=new u),this._coordinates=t}return Object.defineProperty(t.prototype,"coordinates",{get:function(){return this._coordinates},enumerable:!1,configurable:!0}),t}()),p=function(t){function e(e,n,i){void 0===e&&(e=new u),void 0===n&&(n=null),void 0===i&&(i="NONE");var o=t.call(this,e)||this;return o._bodyType=n,o._direction=i,o}return o(e,t),Object.defineProperty(e.prototype,"bodyType",{get:function(){return this._bodyType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),e}(l),f=function(t){function e(e,n){void 0===e&&(e=new u);var i=t.call(this,e)||this;return i._foodType=n,i}return o(e,t),Object.defineProperty(e.prototype,"foodType",{get:function(){return this._foodType},enumerable:!1,configurable:!0}),e}(l),y=function(){function t(){this._length=3,this._direction=["UP","DOWN","LEFT","RIGHT"][Math.floor(4*Math.random())],this._headPosition=new p(new u(Math.floor(Math.random()*(20-2*this._length)+this._length),Math.floor(Math.random()*(20-2*this._length)+this._length)),s),this._head=new h(new u(Math.floor(Math.random()*(20-2*this._length)+this._length),Math.floor(Math.random()*(20-2*this._length)+this._length)),this._direction,"height: 20px; width: 20px; background-color: black; border-radius: 2px"),this._body=[this._head]}return Object.defineProperty(t.prototype,"length",{get:function(){return this._length},set:function(t){this._length=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headPosition",{get:function(){return this._headPosition},set:function(t){this._headPosition=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tailPosition",{get:function(){return this._tailPosition},set:function(t){this._tailPosition=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t},enumerable:!1,configurable:!0}),t}(),_=function(){function t(t){this._playgroundSize=20,this._playgroundDiv=document.getElementById("playground"),this._snake=t,this._fields=this.initializeFields()}return Object.defineProperty(t.prototype,"snake",{get:function(){return this._snake},enumerable:!1,configurable:!0}),t.prototype.initializeFields=function(){return Array(20).fill(0).map((function(t,e){return Array(20).fill(0).map((function(t,n){var i=new u(n,e);return new l(i)}))}))},t.prototype.drawPlayground=function(){this._table=document.createElement("table");var t=document.createElement("tbody");for(var e in Array(this._playgroundSize).fill(0)){var n=document.createElement("tr");for(var i in Array(this._playgroundSize).fill(0)){var o=document.createElement("td");o.setAttribute("style",c),o.setAttribute("id",i+"-"+e),o.setAttribute("field-type",c),o.append(i+"-"+e),n.appendChild(o)}t.appendChild(n)}this._table.appendChild(t),this._table.setAttribute("style","margin: 0 auto; border: 2px solid"),this._playgroundDiv.appendChild(this._table)},t.prototype.resetPlayground=function(){this._snake=new y,this._fields=this.initializeFields(),this._table.remove(),this.drawPlayground(),this.drawSnake(),this.drawFood()},t.prototype.markField=function(t,e){document.getElementById(t.x.toString()+"-"+t.y.toString()).setAttribute("style",e)},t.prototype.drawSnake=function(){var t,e,n,i,o=this._snake.headPosition.coordinates;this.markField(o,s),this._fields[o.y][o.x]=new p(o,s,this._snake.direction);for(var a=1;a<this._snake.length;a++){e=(t=this.getCoordinateShiftFunctions(this._snake.direction,!0,a))[0],n=t[1];var d=new u(e(o.x),n(o.y));i=new p(d,r,this._snake.direction),this.markField(i.coordinates,r),this._fields[i.coordinates.y][i.coordinates.x]=i}this._snake.tailPosition=i},t.prototype.flashTableBorder=function(){var t=this,e=5,n=setInterval((function(){e%2?t._table.setAttribute("style","margin: 0 auto; border: 2px solid red"):t._table.setAttribute("style","margin: 0 auto; border: 2px solid"),e<0&&(t._table.setAttribute("style","margin: 0 auto; border: 2px solid"),clearInterval(n)),e--}),300)},t.prototype.drawFood=function(){var t;do{t=new u(Math.floor(Math.random()*(this._playgroundSize-1)),Math.floor(Math.random()*(this._playgroundSize-1))),console.log(document.getElementById(t.x+"-"+t.y).style.cssText),console.log(c),console.log(document.getElementById(t.x+"-"+t.y).style.cssText===c)}while(this._fields[t.y][t.x]instanceof p);this.setField(t,new f(t,a)),this.markField(t,a)},t.prototype.getCoordinateShiftFunctions=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=1),n=e?-1*n:n,"LEFT"===t||"RIGHT"===t?["LEFT"===t?function(t){return t-n}:function(t){return t+n},function(t){return t}]:"UP"===t||"DOWN"===t?[function(t){return t},"UP"===t?function(t){return t-n}:function(t){return t+n}]:void 0},t.prototype.getField=function(t){return this._fields[t.y][t.x]},t.prototype.setField=function(t,e){this._fields[t.y][t.x]=e},t.prototype.moveSnake=function(){var t=this.makeShiftedCoordinates(this._snake.headPosition.coordinates,this._snake.direction);this.checkBorderHit(t),this.checkBodyHit(t),this.checkFoodField(t)&&this.drawFood();var e=this.checkFoodField(this._snake.headPosition.coordinates)?d:r;if(this.setField(this._snake.headPosition.coordinates,new p(this._snake.headPosition.coordinates,e,this._snake.direction)),this.markField(this._snake.headPosition.coordinates,e),this._snake.headPosition=new p(t,s,this._snake.direction),this.markField(this._snake.headPosition.coordinates,s),this.checkBodyAndFoodField(this._snake.tailPosition.coordinates))this.setField(this._snake.tailPosition.coordinates,new p(this._snake.tailPosition.coordinates,r,this._snake.tailPosition.direction)),this._snake.length=this._snake.length+1;else{var n=this.getField(this._snake.tailPosition.coordinates),i=this.makeShiftedCoordinates(this._snake.tailPosition.coordinates,n.direction),o=this.getField(i);this.setField(this._snake.tailPosition.coordinates,new l(this._snake.tailPosition.coordinates)),this.markField(this._snake.tailPosition.coordinates,"height: 20px; width: 20px; background-color: silver;"),this._snake.tailPosition=new p(i,r,o.direction)}},t.prototype.makeShiftedCoordinates=function(t,e){var n=this.getCoordinateShiftFunctions(e),i=n[0],o=n[1];return new u(i(t.x),o(t.y))},t.prototype.makeNewTailPosition=function(t){var e=this.getCoordinateShiftFunctions(t.direction),n=e[0],i=e[1];n(t.coordinates.x),i(t.coordinates.y);return new p(new u(n(t.coordinates.x)))},t.prototype.checkBorderHit=function(t){if(t.x<0||t.x>this._playgroundSize-1||t.y<0||t.x>this._playgroundSize)throw console.log("You hit the border!"),new Error("You hit the border!")},t.prototype.checkBodyHit=function(t){if(this._fields[t.y][t.x]instanceof p)throw console.log("You hit yourself!"),new Error("You hit yourself!")},t.prototype.checkFoodField=function(t){return this.getField(t)instanceof f},t.prototype.checkBodyAndFoodField=function(t){return this.getField(t).bodyType===d},t}(),g=function(){function t(t){var e=this;this._timeSlicePeriod=90,this._gameRunning=!1,this.spaceKeyListener=function(t){switch(t.keyCode){case 32:e.gameRunning?e.pause():e.start()}},this.controlKeysListener=function(t){switch(t.keyCode){case 105:e._playground.snake.direction="UP";break;case 107:e._playground.snake.direction="DOWN";break;case 106:e._playground.snake.direction="LEFT";break;case 108:e._playground.snake.direction="RIGHT"}},this._playground=t}return t.prototype.start=function(){this.enableSnakeControls(),this._gameRunning=!0},t.prototype.pause=function(){this.disableSnakeControls(),this._gameRunning=!1},t.prototype.reset=function(){this._playground.resetPlayground(),this.enableGameControls()},t.prototype.gameover=function(){var t=this;this.disableGameControls(),this.disableSnakeControls(),this._gameRunning=!1,setTimeout((function(){t.reset()}),2e3),this._playground.flashTableBorder()},t.prototype.enableGameControls=function(){document.addEventListener("keypress",this.spaceKeyListener)},t.prototype.disableGameControls=function(){document.removeEventListener("keypress",this.spaceKeyListener)},t.prototype.enableSnakeControls=function(){document.addEventListener("keypress",this.controlKeysListener)},t.prototype.disableSnakeControls=function(){document.removeEventListener("keypress",this.controlKeysListener)},Object.defineProperty(t.prototype,"timeSlicePeriod",{get:function(){return this._timeSlicePeriod},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameRunning",{get:function(){return this._gameRunning},enumerable:!1,configurable:!0}),t.prototype.timeSlice=function(){if(this._gameRunning)try{this._playground.moveSnake()}catch(t){this.gameover()}},t}(),b=new _(new y);new g(b);b.drawPlayground()}]);