!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var i=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e},enumerable:!1,configurable:!0}),e}(),o=function(){function e(e,t,n){void 0===e&&(e=new i),void 0===t&&(t=null),void 0===n&&(n="NONE")}return Object.defineProperty(e.prototype,"coordinates",{get:function(){return this._coordinates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bodyType",{get:function(){return this._bodyType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),e}(),r=(function(){function e(e,t){}Object.defineProperty(e.prototype,"coordinates",{get:function(){return this._coordinates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"foodType",{get:function(){return this._foodType},enumerable:!1,configurable:!0})}(),function(){function e(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n="RIGHT"),this._x=e,this._y=t,this._direction=n}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),e}()),s=function(){function e(){this._length=3,this._direction=["UP","DOWN","LEFT","RIGHT"][Math.floor(4*Math.random())],this._headPosition=new r(Math.floor(Math.random()*(20-2*this._length)+this._length),Math.floor(Math.random()*(20-2*this._length)+this._length),this._direction),this._headPosition2=new o(new i(Math.floor(Math.random()*(20-2*this._length)+this._length),Math.floor(Math.random()*(20-2*this._length)+this._length)),"blue")}return Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(e){this._length=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headPosition",{get:function(){return this._headPosition},set:function(e){this._headPosition=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tailPosition",{get:function(){return this._tailPosition},set:function(e){this._tailPosition=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e},enumerable:!1,configurable:!0}),e}(),a=function(){function e(e){this._playgroundSize=20,this._playgroundDiv=document.getElementById("playground"),this._fields=Array(20).fill(0).map((function(){return Array(20).fill(0)})),this._snake=e,console.log(this._fields)}return Object.defineProperty(e.prototype,"snake",{get:function(){return this._snake},enumerable:!1,configurable:!0}),e.prototype.drawPlayground=function(){this._table=document.createElement("table");var e=document.createElement("tbody");for(var t in this._fields){var n=document.createElement("tr");for(var i in this._fields[t]){var o=document.createElement("td");o.setAttribute("style","height: 20px; width: 20px; background-color: silver;"),o.setAttribute("id",i+"-"+t),n.appendChild(o)}e.appendChild(n)}this._table.appendChild(e),this._table.setAttribute("style","margin: 0 auto; border: 2px solid"),this._playgroundDiv.appendChild(this._table)},e.prototype.resetPlayground=function(){this._snake=new s,this._fields=Array(20).fill(0).map((function(){return Array(20).fill(0)})),this._table.remove(),this.drawPlayground(),this.drawSnake()},e.prototype.markField=function(e,t){document.getElementById(e.x.toString()+"-"+e.y.toString()).setAttribute("style","height: 20px; width: 20px; background-color: "+t)},e.prototype.drawSnake=function(){var e,t,n,i,o=this._snake.headPosition;this.markField(o,"blue"),this._fields[o.y][o.x]=this._snake.direction;for(var s=1;s<this._snake.length;s++)t=(e=this.getCoordinateShiftFunctions(this._snake.direction,!0,s))[0],n=e[1],i=new r(t(o.x),n(o.y),this._snake.direction),this.markField(i,"black"),this._fields[i.y][i.x]=this._snake.direction;this._snake.tailPosition=i},e.prototype.flashTableBorder=function(){var e=this,t=5,n=setInterval((function(){console.log("intervalll"),t%2?e._table.setAttribute("style","margin: 0 auto; border: 2px solid red"):e._table.setAttribute("style","margin: 0 auto; border: 2px solid"),t<0&&(e._table.setAttribute("style","margin: 0 auto; border: 2px solid"),clearInterval(n)),t--}),300)},e.prototype.drawFood=function(){},e.prototype.getCoordinateShiftFunctions=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=1),n=t?-1*n:n,"LEFT"===e||"RIGHT"===e?["LEFT"===e?function(e){return e-n}:function(e){return e+n},function(e){return e}]:"UP"===e||"DOWN"===e?[function(e){return e},"UP"===e?function(e){return e-n}:function(e){return e+n}]:void 0},e.prototype.moveSnake=function(){var e,t,n=this._snake.tailPosition;this._fields[n.y][n.x]=0;var i=this.getCoordinateShiftFunctions(n.direction),o=i[0],s=i[1],a=[o(n.x),s(n.y)],u=a[0],l=a[1];this._snake.tailPosition=new r(u,l,this._fields[l][u]);var c=this._snake.headPosition;this._fields[c.y][c.x]=this._snake.direction,o=(e=this.getCoordinateShiftFunctions(this._snake.direction))[0],s=e[1],u=(t=[o(c.x),s(c.y)])[0],l=t[1],this.checkBorders(u,l),this._snake.headPosition=new r(u,l,this._snake.direction),this.markField(n,"silver"),this.markField(c,"black"),this.markField(this._snake.headPosition,"blue")},e.prototype.checkBorders=function(e,t){if(e<0||e>this._playgroundSize-1||t<0||t>this._playgroundSize-1)throw new Error("Out of borders")},e}(),u=function(){function e(e){var t=this;this._timeSlicePeriod=90,this._gameRunning=!1,this.spaceKeyListener=function(e){switch(e.keyCode){case 32:t.gameRunning?t.pause():t.start()}},this.controlKeysListener=function(e){switch(e.keyCode){case 105:t._playground.snake.direction="UP";break;case 107:t._playground.snake.direction="DOWN";break;case 106:t._playground.snake.direction="LEFT";break;case 108:t._playground.snake.direction="RIGHT"}},this._playground=e}return e.prototype.start=function(){this.enableSnakeControls(),this._gameRunning=!0},e.prototype.pause=function(){this.disableSnakeControls(),this._gameRunning=!1},e.prototype.reset=function(){this._playground.resetPlayground(),this.enableGameControls()},e.prototype.gameover=function(){var e=this;this.disableGameControls(),this.disableSnakeControls(),this._gameRunning=!1,setTimeout((function(){e.reset()}),2e3),this._playground.flashTableBorder()},e.prototype.enableGameControls=function(){document.addEventListener("keypress",this.spaceKeyListener)},e.prototype.disableGameControls=function(){document.removeEventListener("keypress",this.spaceKeyListener)},e.prototype.enableSnakeControls=function(){document.addEventListener("keypress",this.controlKeysListener)},e.prototype.disableSnakeControls=function(){document.removeEventListener("keypress",this.controlKeysListener)},Object.defineProperty(e.prototype,"timeSlicePeriod",{get:function(){return this._timeSlicePeriod},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameRunning",{get:function(){return this._gameRunning},enumerable:!1,configurable:!0}),e.prototype.timeSlice=function(){if(this._gameRunning)try{this._playground.moveSnake()}catch(e){this.gameover()}},e}(),l=new a(new s),c=new u(l);l.drawPlayground(),l.drawSnake(),c.enableGameControls(),setInterval((function(){c.timeSlice()}),c.timeSlicePeriod)}]);